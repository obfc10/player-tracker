"use strict";(()=>{var e={};e.id=3002,e.ids=[3002],e.modules={98432:e=>{e.exports=require("bcryptjs")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},66643:(e,r,t)=>{t.r(r),t.d(r,{headerHooks:()=>b,originalPathname:()=>j,patchFetch:()=>w,requestAsyncStorage:()=>m,routeModule:()=>h,serverHooks:()=>g,staticGenerationAsyncStorage:()=>f,staticGenerationBailout:()=>O});var a={};t.r(a),t.d(a,{POST:()=>p,dynamic:()=>l,runtime:()=>c});var s=t(6170),o=t(8533),n=t(54387),i=t(40064),u=t(98432),d=t.n(u);!function(){var e=Error("Cannot find module '@/lib/db'");throw e.code="MODULE_NOT_FOUND",e}();let c="nodejs",l="force-dynamic";async function p(e){try{let{username:r,password:t,role:a}=await e.json();if(!r||!t)return i.Z.json({error:"Username and password are required"},{status:400});if(r.length<3)return i.Z.json({error:"Username must be at least 3 characters long"},{status:400});if(t.length<6)return i.Z.json({error:"Password must be at least 6 characters long"},{status:400});if(await Object(function(){var e=Error("Cannot find module '@/lib/db'");throw e.code="MODULE_NOT_FOUND",e}()).user.findUnique({where:{username:r}}))return i.Z.json({error:"Username already exists"},{status:409});let s=await d().hash(t,12),o=await Object(function(){var e=Error("Cannot find module '@/lib/db'");throw e.code="MODULE_NOT_FOUND",e}()).user.create({data:{username:r,password:s,role:a||"VIEWER",status:"PENDING"}});return i.Z.json({success:!0,message:"Registration submitted successfully. Your account is pending approval from an administrator.",user:{id:o.id,username:o.username,role:o.role,status:o.status}})}catch(e){return console.error("Registration error:",e),i.Z.json({error:"Failed to create user"},{status:500})}}let h=new s.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/api/auth/register/route",pathname:"/api/auth/register",filename:"route",bundlePath:"app/api/auth/register/route"},resolvedPagePath:"/Users/ciaranobrien/player-tracker/src/app/api/auth/register/route.ts",nextConfigOutput:"",userland:a}),{requestAsyncStorage:m,staticGenerationAsyncStorage:f,serverHooks:g,headerHooks:b,staticGenerationBailout:O}=h,j="/api/auth/register/route";function w(){return(0,n.patchFetch)({serverHooks:g,staticGenerationAsyncStorage:f})}}};var r=require("../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),a=r.X(0,[3499,7386],()=>t(66643));module.exports=a})();