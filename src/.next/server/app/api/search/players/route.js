"use strict";(()=>{var e={};e.id=9194,e.ids=[9194],e.modules={30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},84561:(e,r,t)=>{t.r(r),t.d(r,{headerHooks:()=>y,originalPathname:()=>g,patchFetch:()=>v,requestAsyncStorage:()=>p,routeModule:()=>d,serverHooks:()=>m,staticGenerationAsyncStorage:()=>h,staticGenerationBailout:()=>f});var a={};t.r(a),t.d(a,{GET:()=>u,dynamic:()=>l,runtime:()=>c});var n=t(6170),o=t(8533),s=t(54387),i=t(40064);!function(){var e=Error("Cannot find module '@/lib/db'");throw e.code="MODULE_NOT_FOUND",e}();let c="nodejs",l="force-dynamic";async function u(e){try{let{searchParams:r}=new URL(e.url),t=r.get("q")||"",a=parseInt(r.get("limit")||"10");if(t.length<2)return i.Z.json([]);let n=(await Object(function(){var e=Error("Cannot find module '@/lib/db'");throw e.code="MODULE_NOT_FOUND",e}()).player.findMany({where:{OR:[{currentName:{contains:t,mode:"insensitive"}},{lordId:{contains:t,mode:"insensitive"}}]},include:{snapshots:{include:{snapshot:!0},orderBy:{snapshot:{timestamp:"desc"}},take:1}},take:a,orderBy:{currentName:"asc"}})).map(e=>{let r=e.snapshots[0];return{lordId:e.lordId,currentName:e.currentName,currentPower:r?parseInt(r.currentPower):0,allianceTag:r?.allianceTag||null,lastSeen:r?.snapshot.timestamp||null}});return i.Z.json(n)}catch(e){return console.error("Error searching players:",e),i.Z.json({error:"Failed to search players"},{status:500})}}let d=new n.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/api/search/players/route",pathname:"/api/search/players",filename:"route",bundlePath:"app/api/search/players/route"},resolvedPagePath:"/Users/ciaranobrien/player-tracker/src/app/api/search/players/route.ts",nextConfigOutput:"",userland:a}),{requestAsyncStorage:p,staticGenerationAsyncStorage:h,serverHooks:m,headerHooks:y,staticGenerationBailout:f}=d,g="/api/search/players/route";function v(){return(0,s.patchFetch)({serverHooks:m,staticGenerationAsyncStorage:h})}}};var r=require("../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),a=r.X(0,[3499,7386],()=>t(84561));module.exports=a})();