(()=>{var e={};e.id=9096,e.ids=[9096],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},71017:e=>{"use strict";e.exports=require("path")},57310:e=>{"use strict";e.exports=require("url")},94102:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>o.a,__next_app__:()=>u,originalPathname:()=>m,pages:()=>d,routeModule:()=>x,tree:()=>l});var n=r(7),s=r(8533),a=r(29377),o=r.n(a),i=r(29799),c={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>i[e]);r.d(t,c);let l=["",{children:["dashboard",{children:["merits",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,71252)),"/Users/ciaranobrien/player-tracker/src/app/dashboard/merits/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,65697)),"/Users/ciaranobrien/player-tracker/src/app/dashboard/layout.tsx"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,97418))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,59224)),"/Users/ciaranobrien/player-tracker/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,73472,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,97418))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],d=["/Users/ciaranobrien/player-tracker/src/app/dashboard/merits/page.tsx"],m="/dashboard/merits/page",u={require:r,loadChunk:()=>Promise.resolve()},x=new n.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/dashboard/merits/page",pathname:"/dashboard/merits",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},27838:(e,t,r)=>{Promise.resolve().then(r.bind(r,37801))},37801:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>h});var n=r(54714),s=r(77580),a=r.n(s),o=r(88934),i=r(74417),c=r(41784),l=r(22725);let d=(0,r(36834).Z)("percent",[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]]);var m=r(96289),u=r(10250),x=r(61705),p=r(80620);function h(){let e=(0,o.useRouter)(),{selectedSeasonMode:t,selectedSeasonId:r,loading:h}=Object(function(){var e=Error("Cannot find module '@/contexts/SeasonContext'");throw e.code="MODULE_NOT_FOUND",e}())(),[f,N]=(0,s.useState)(null),[g,O]=(0,s.useState)(!0),[j,b]=(0,s.useState)("current"),[y,v]=(0,s.useState)(!1);if((0,s.useEffect)(()=>{v(!0)},[]),(0,s.useEffect)(()=>{y&&w()},[j,t,r,y]),h||!y)return n.jsx("div",{className:"p-6 space-y-6",children:n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-500"})})});let w=async()=>{O(!0);try{let e=new URLSearchParams({timeframe:j,seasonMode:t||"current",...r&&{seasonId:r}}),n=await fetch(`/api/merits?${e}`);if(n.ok){let e=await n.json();N(e)}else console.error("Failed to fetch merit data"),N(null)}catch(e){console.error("Error fetching merit data:",e),N(null)}finally{O(!1)}},_=t=>{e.push(`/dashboard/player/${t.playerId}`)},E=e=>{let t="string"==typeof e?parseInt(e)||0:e||0;return isNaN(t)?"0":t>=1e6?(t/1e6).toFixed(1)+"M":t>=1e3?(t/1e3).toFixed(1)+"K":t.toLocaleString()},U=e=>{let t=e||0;return isNaN(t)||!isFinite(t)?"0.0%":Math.min(Math.max(t,0),999999).toFixed(1)+"%"},D=(e,t,r,s)=>(0,n.jsxs)(Object(function(){var e=Error("Cannot find module '@/components/ui/card'");throw e.code="MODULE_NOT_FOUND",e}()),{className:"bg-gray-800 border-gray-700",children:[n.jsx(Object(function(){var e=Error("Cannot find module '@/components/ui/card'");throw e.code="MODULE_NOT_FOUND",e}()),{children:(0,n.jsxs)(Object(function(){var e=Error("Cannot find module '@/components/ui/card'");throw e.code="MODULE_NOT_FOUND",e}()),{className:"text-white flex items-center gap-2",children:[a().createElement(r,{className:"w-5 h-5 text-yellow-400"}),t]})}),n.jsx(Object(function(){var e=Error("Cannot find module '@/components/ui/card'");throw e.code="MODULE_NOT_FOUND",e}()),{children:g?n.jsx("div",{className:"text-center py-8",children:n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-500 mx-auto"})}):n.jsx("div",{className:"space-y-3",children:e.slice(0,10).map((e,t)=>{let{value:r,label:a}=s(e);return(0,n.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-700 rounded-lg hover:bg-gray-600 transition-colors cursor-pointer",onClick:()=>_(e),children:[(0,n.jsxs)("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-8 h-8 bg-yellow-600 rounded-full flex items-center justify-center",children:(0,n.jsxs)("span",{className:"text-white font-bold text-sm",children:["#",(t+1).toString()]})}),(0,n.jsxs)("div",{children:[n.jsx("p",{className:"text-white font-medium",children:e.currentName||e.name}),(0,n.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[e.allianceTag&&n.jsx(Object(function(){var e=Error("Cannot find module '@/components/ui/badge'");throw e.code="MODULE_NOT_FOUND",e}()),{className:"bg-purple-500/20 text-purple-300 border-purple-500/30 text-xs",children:e.allianceTag}),(0,n.jsxs)("span",{className:"text-gray-400",children:["Lv.",e.cityLevel||"0"]}),(0,n.jsxs)("span",{className:"text-gray-400",children:["Div.",e.division||"0"]})]})]})]}),(0,n.jsxs)("div",{className:"text-right",children:[n.jsx("p",{className:"text-yellow-400 font-bold",children:r}),n.jsx("p",{className:"text-gray-400 text-sm",children:a})]})]},e.playerId)})})})]});return(0,n.jsxs)("div",{className:"p-6 space-y-6",children:[n.jsx("div",{className:"mb-6",children:(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsxs)("div",{children:[(0,n.jsxs)("h1",{className:"text-3xl font-bold text-white mb-2 flex items-center gap-3",children:[n.jsx(i.Z,{className:"w-8 h-8 text-yellow-400"}),"Merit Analytics"]}),n.jsx("p",{className:"text-gray-400",children:"Comprehensive merit tracking and efficiency analysis"})]}),(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[f&&n.jsx(Object(function(){var e=Error("Cannot find module '@/components/ui/export-button'");throw e.code="MODULE_NOT_FOUND",e}()),{data:[...f.topMerits||[],...f.topEfficiency||[]].map(e=>({playerName:e.currentName||e.name||"",alliance:e.allianceTag||"",merits:e.merits||"0",power:e.currentPower||"0",meritPowerRatio:e.meritPowerRatio||0,meritKillRatio:e.meritKillRatio||0,cityLevel:e.cityLevel||0,division:e.division||0})),exportConfig:Object(function(){var e=Error("Cannot find module '@/lib/export'");throw e.code="MODULE_NOT_FOUND",e}()).merits,filename:`merit_analytics_${new Date().toISOString().split("T")[0]}`,title:"Kingdom 671 - Merit Analytics",subtitle:`${f.kingdomStats?.totalPlayers||0} players analyzed | Export generated on ${new Date().toLocaleDateString()}`,variant:"outline",size:"sm"}),(0,n.jsxs)(Object(function(){var e=Error("Cannot find module '@/components/ui/button'");throw e.code="MODULE_NOT_FOUND",e}()),{variant:"outline",size:"sm",onClick:w,disabled:g,className:"flex items-center gap-2",children:[n.jsx(c.Z,{className:`w-4 h-4 ${g?"animate-spin":""}`}),"Refresh"]})]})]})}),(0,n.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[n.jsx(Object(function(){var e=Error("Cannot find module '@/components/SeasonSelector'");throw e.code="MODULE_NOT_FOUND",e}()),{}),(0,n.jsxs)(Object(function(){var e=Error("Cannot find module '@/components/ui/card'");throw e.code="MODULE_NOT_FOUND",e}()),{className:"bg-gray-800 border-gray-700",children:[n.jsx(Object(function(){var e=Error("Cannot find module '@/components/ui/card'");throw e.code="MODULE_NOT_FOUND",e}()),{children:n.jsx(Object(function(){var e=Error("Cannot find module '@/components/ui/card'");throw e.code="MODULE_NOT_FOUND",e}()),{className:"text-white text-sm",children:"Analysis Period"})}),n.jsx(Object(function(){var e=Error("Cannot find module '@/components/ui/card'");throw e.code="MODULE_NOT_FOUND",e}()),{children:n.jsx("div",{className:"flex gap-2",children:[{key:"current",label:"Current Snapshot"},{key:"week",label:"Past Week Growth"},{key:"month",label:"Past Month Growth"}].map(e=>n.jsx(Object(function(){var e=Error("Cannot find module '@/components/ui/button'");throw e.code="MODULE_NOT_FOUND",e}()),{variant:j===e.key?"secondary":"outline",size:"sm",onClick:()=>b(e.key),children:e.label},e.key))})})]})]}),f?.kingdomStats&&(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[n.jsx(Object(function(){var e=Error("Cannot find module '@/components/ui/card'");throw e.code="MODULE_NOT_FOUND",e}()),{className:"bg-gray-800 border-gray-700",children:n.jsx(Object(function(){var e=Error("Cannot find module '@/components/ui/card'");throw e.code="MODULE_NOT_FOUND",e}()),{className:"p-6",children:(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsxs)("div",{children:[n.jsx("p",{className:"text-gray-400 text-sm",children:"Total Kingdom Merits"}),n.jsx("p",{className:"text-2xl font-bold text-yellow-400",children:E(f.kingdomStats.totalMerits)})]}),n.jsx(i.Z,{className:"w-8 h-8 text-yellow-400"})]})})}),n.jsx(Object(function(){var e=Error("Cannot find module '@/components/ui/card'");throw e.code="MODULE_NOT_FOUND",e}()),{className:"bg-gray-800 border-gray-700",children:n.jsx(Object(function(){var e=Error("Cannot find module '@/components/ui/card'");throw e.code="MODULE_NOT_FOUND",e}()),{className:"p-6",children:(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsxs)("div",{children:[n.jsx("p",{className:"text-gray-400 text-sm",children:"Average Merits"}),n.jsx("p",{className:"text-2xl font-bold text-blue-400",children:E(f.kingdomStats.averageMerits)})]}),n.jsx(l.Z,{className:"w-8 h-8 text-blue-400"})]})})}),n.jsx(Object(function(){var e=Error("Cannot find module '@/components/ui/card'");throw e.code="MODULE_NOT_FOUND",e}()),{className:"bg-gray-800 border-gray-700",children:n.jsx(Object(function(){var e=Error("Cannot find module '@/components/ui/card'");throw e.code="MODULE_NOT_FOUND",e}()),{className:"p-6",children:(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsxs)("div",{children:[n.jsx("p",{className:"text-gray-400 text-sm",children:"Average Efficiency"}),n.jsx("p",{className:"text-2xl font-bold text-green-400",children:U(f.kingdomStats.averageEfficiency)})]}),n.jsx(d,{className:"w-8 h-8 text-green-400"})]})})}),n.jsx(Object(function(){var e=Error("Cannot find module '@/components/ui/card'");throw e.code="MODULE_NOT_FOUND",e}()),{className:"bg-gray-800 border-gray-700",children:n.jsx(Object(function(){var e=Error("Cannot find module '@/components/ui/card'");throw e.code="MODULE_NOT_FOUND",e}()),{className:"p-6",children:(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsxs)("div",{children:[n.jsx("p",{className:"text-gray-400 text-sm",children:"Players Analyzed"}),n.jsx("p",{className:"text-2xl font-bold text-purple-400",children:(f.kingdomStats.totalPlayers||0).toLocaleString()})]}),n.jsx(m.Z,{className:"w-8 h-8 text-purple-400"})]})})})]}),(0,n.jsxs)("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-6",children:[D(f?.topMerits||[],"Top Total Merits",i.Z,e=>({value:E(e.merits),label:`${E(e.currentPower)} power`})),D(f?.topEfficiency||[],"Top Merit Efficiency",u.Z,e=>({value:U(e.meritPowerRatio),label:`${E(e.merits)} merits`})),D(f?.topKillEfficiency||[],"Top Combat Efficiency",x.Z,e=>({value:e.meritKillRatio.toFixed(1),label:`${E(e.unitsKilled)} kills`})),"current"!==j&&D(f?.topGrowth||[],"Top Merit Growth",p.Z,e=>({value:E(e.meritGrowth||0),label:`+${Math.max(0,e.meritGrowthPercent||0).toFixed(1)}%`}))]}),(0,n.jsxs)(Object(function(){var e=Error("Cannot find module '@/components/ui/card'");throw e.code="MODULE_NOT_FOUND",e}()),{className:"bg-gray-800 border-gray-700",children:[n.jsx(Object(function(){var e=Error("Cannot find module '@/components/ui/card'");throw e.code="MODULE_NOT_FOUND",e}()),{children:n.jsx(Object(function(){var e=Error("Cannot find module '@/components/ui/card'");throw e.code="MODULE_NOT_FOUND",e}()),{className:"text-white text-lg",children:"Merit Analysis Guide"})}),n.jsx(Object(function(){var e=Error("Cannot find module '@/components/ui/card'");throw e.code="MODULE_NOT_FOUND",e}()),{children:(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[(0,n.jsxs)("div",{className:"p-4 bg-gray-700 rounded-lg",children:[(0,n.jsxs)("h4",{className:"text-white font-medium mb-2 flex items-center gap-2",children:[n.jsx(u.Z,{className:"w-4 h-4 text-green-400"}),"Merit Efficiency"]}),n.jsx("p",{className:"text-gray-400",children:"Merit/Power ratio shows how efficiently players convert power into combat effectiveness. Higher % = better efficiency."})]}),(0,n.jsxs)("div",{className:"p-4 bg-gray-700 rounded-lg",children:[(0,n.jsxs)("h4",{className:"text-white font-medium mb-2 flex items-center gap-2",children:[n.jsx(x.Z,{className:"w-4 h-4 text-red-400"}),"Combat Efficiency"]}),n.jsx("p",{className:"text-gray-400",children:"Merit/Kills ratio indicates combat skill. Higher values suggest better target selection and battle tactics."})]}),(0,n.jsxs)("div",{className:"p-4 bg-gray-700 rounded-lg",children:[(0,n.jsxs)("h4",{className:"text-white font-medium mb-2 flex items-center gap-2",children:[n.jsx(p.Z,{className:"w-4 h-4 text-blue-400"}),"Growth Tracking"]}),n.jsx("p",{className:"text-gray-400",children:"Merit growth over time shows player activity and improvement. Consistent growth indicates active engagement."})]})]})})]})]})}(function(){var e=Error("Cannot find module '@/contexts/SeasonContext'");throw e.code="MODULE_NOT_FOUND",e})(),function(){var e=Error("Cannot find module '@/components/SeasonSelector'");throw e.code="MODULE_NOT_FOUND",e}(),function(){var e=Error("Cannot find module '@/components/ui/card'");throw e.code="MODULE_NOT_FOUND",e}(),function(){var e=Error("Cannot find module '@/components/ui/button'");throw e.code="MODULE_NOT_FOUND",e}(),function(){var e=Error("Cannot find module '@/components/ui/badge'");throw e.code="MODULE_NOT_FOUND",e}(),function(){var e=Error("Cannot find module '@/components/ui/export-button'");throw e.code="MODULE_NOT_FOUND",e}(),function(){var e=Error("Cannot find module '@/lib/export'");throw e.code="MODULE_NOT_FOUND",e}()},71252:(e,t,r)=>{"use strict";r.r(t),r.d(t,{$$typeof:()=>a,__esModule:()=>s,default:()=>o});let n=(0,r(71481).createProxy)(String.raw`/Users/ciaranobrien/player-tracker/src/app/dashboard/merits/page.tsx`),{__esModule:s,$$typeof:a}=n,o=n.default}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),n=t.X(0,[3499,2463,9898,4378,2813,6672],()=>r(94102));module.exports=n})();