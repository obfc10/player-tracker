(()=>{var e={};e.id=426,e.ids=[426],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},71017:e=>{"use strict";e.exports=require("path")},57310:e=>{"use strict";e.exports=require("url")},97232:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>s.a,__next_app__:()=>u,originalPathname:()=>m,pages:()=>d,routeModule:()=>h,tree:()=>l});var n=r(7),a=r(8533),o=r(29377),s=r.n(o),i=r(29799),c={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>i[e]);r.d(t,c);let l=["",{children:["dashboard",{children:["changes",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,90540)),"/Users/ciaranobrien/player-tracker/src/app/dashboard/changes/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,65697)),"/Users/ciaranobrien/player-tracker/src/app/dashboard/layout.tsx"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,97418))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,59224)),"/Users/ciaranobrien/player-tracker/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,73472,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,97418))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],d=["/Users/ciaranobrien/player-tracker/src/app/dashboard/changes/page.tsx"],m="/dashboard/changes/page",u={require:r,loadChunk:()=>Promise.resolve()},h=new n.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/dashboard/changes/page",pathname:"/dashboard/changes",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},57575:(e,t,r)=>{Promise.resolve().then(r.bind(r,19160))},58403:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});let n=(0,r(36834).Z)("crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]])},19950:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});let n=(0,r(36834).Z)("shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]])},17706:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});let n=(0,r(36834).Z)("trending-down",[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]])},13230:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});let n=(0,r(36834).Z)("zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]])},19160:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>b});var n=r(54714),a=r(77580),o=r(88934),s=r(13230),i=r(74417),c=r(61705),l=r(19950),d=r(58403);let m=(0,r(36834).Z)("heart",[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]]);var u=r(96289),h=r(10250),p=r(22725),x=r(41784),g=r(80620),O=r(17706);(function(){var e=Error("Cannot find module '@/components/ui/card'");throw e.code="MODULE_NOT_FOUND",e})(),function(){var e=Error("Cannot find module '@/components/ui/button'");throw e.code="MODULE_NOT_FOUND",e}(),function(){var e=Error("Cannot find module '@/components/ui/badge'");throw e.code="MODULE_NOT_FOUND",e}(),function(){var e=Error("Cannot find module '@/components/ui/export-button'");throw e.code="MODULE_NOT_FOUND",e}(),function(){var e=Error("Cannot find module '@/lib/export'");throw e.code="MODULE_NOT_FOUND",e}(),function(){var e=Error("Cannot find module '@/components/changes/ChangesTable'");throw e.code="MODULE_NOT_FOUND",e}(),function(){var e=Error("Cannot find module '@/components/changes/ChangesSummary'");throw e.code="MODULE_NOT_FOUND",e}();let f=[{key:"currentPower",label:"Power",icon:s.Z},{key:"merits",label:"Merits",icon:i.Z},{key:"unitsKilled",label:"Units Killed",icon:c.Z},{key:"unitsDead",label:"Units Lost",icon:l.Z},{key:"victories",label:"Victories",icon:d.Z},{key:"defeats",label:"Defeats",icon:m},{key:"cityLevel",label:"City Level",icon:u.Z},{key:"killDeathRatio",label:"K/D Ratio",icon:h.Z},{key:"winRate",label:"Win Rate",icon:i.Z}],N=[{key:"previous",label:"Previous Snapshot"},{key:"week",label:"Past Week"},{key:"custom",label:"Custom Period"}];function b(){let e=(0,o.useRouter)(),[t,r]=(0,a.useState)(null),[s,i]=(0,a.useState)(!0),[c,l]=(0,a.useState)("currentPower"),[d,m]=(0,a.useState)("previous"),[u,b]=(0,a.useState)("all"),[y,j]=(0,a.useState)(""),[v,w]=(0,a.useState)(""),[_,U]=(0,a.useState)("25");(0,a.useEffect)(()=>{D()},[c,d,u,y,v,_]);let D=async()=>{i(!0);try{let e=new URLSearchParams({metric:c,compareType:d,alliance:u,limit:_});"custom"===d&&y&&v&&(e.append("fromDate",y),e.append("toDate",v));let t=await fetch(`/api/changes?${e}`);if(t.ok){let e=await t.json();r(e)}else{let e=await t.json().catch(()=>({error:"Unknown error"}));console.error("API Error:",e),r(null)}}catch(e){console.error("Error fetching changes data:",e),r(null)}finally{i(!1)}},E=e=>{l(e)},C=t=>{e.push(`/dashboard/player/${t.playerId}`)},L=e=>new Date(e).toLocaleString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return(0,n.jsxs)("div",{className:"p-6 space-y-6",children:[n.jsx("div",{className:"mb-6",children:(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsxs)("div",{children:[(0,n.jsxs)("h1",{className:"text-3xl font-bold text-white mb-2 flex items-center gap-3",children:[n.jsx(p.Z,{className:"w-8 h-8 text-purple-400"}),"Changes Analysis"]}),n.jsx("p",{className:"text-gray-400",children:"Track player progression and compare performance between periods"})]}),(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[t&&n.jsx(Object(function(){var e=Error("Cannot find module '@/components/ui/export-button'");throw e.code="MODULE_NOT_FOUND",e}()),{data:[...t.gainers,...t.losers,...t.smallestIncreases].map(e=>({playerName:e.currentName||e.name,changeType:e.change>0?"Gain":"Loss",field:c,oldValue:e.fromValue,newValue:e.toValue,difference:e.change,timestamp:t.summary.toSnapshot.timestamp})),exportConfig:Object(function(){var e=Error("Cannot find module '@/lib/export'");throw e.code="MODULE_NOT_FOUND",e}()).changes,filename:`changes_analysis_${c}_${new Date().toISOString().split("T")[0]}`,title:`Kingdom 671 - Changes Analysis (${c})`,subtitle:`${t.gainers.length+t.losers.length} players tracked | Export generated on ${new Date().toLocaleDateString()}`,variant:"outline",size:"sm"}),(0,n.jsxs)(Object(function(){var e=Error("Cannot find module '@/components/ui/button'");throw e.code="MODULE_NOT_FOUND",e}()),{variant:"outline",size:"sm",onClick:()=>{D()},disabled:s,className:"flex items-center gap-2",children:[n.jsx(x.Z,{className:`w-4 h-4 ${s?"animate-spin":""}`}),"Refresh"]})]})]})}),(0,n.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[(0,n.jsxs)(Object(function(){var e=Error("Cannot find module '@/components/ui/card'");throw e.code="MODULE_NOT_FOUND",e}()),{className:"bg-gray-800 border-gray-700",children:[n.jsx(Object(function(){var e=Error("Cannot find module '@/components/ui/card'");throw e.code="MODULE_NOT_FOUND",e}()),{children:n.jsx(Object(function(){var e=Error("Cannot find module '@/components/ui/card'");throw e.code="MODULE_NOT_FOUND",e}()),{className:"text-white text-sm",children:"Metric to Compare"})}),n.jsx(Object(function(){var e=Error("Cannot find module '@/components/ui/card'");throw e.code="MODULE_NOT_FOUND",e}()),{children:n.jsx("div",{className:"grid grid-cols-2 gap-2",children:f.map(e=>{let t=c===e.key,r=e.icon;return(0,n.jsxs)(Object(function(){var e=Error("Cannot find module '@/components/ui/button'");throw e.code="MODULE_NOT_FOUND",e}()),{variant:t?"secondary":"outline",size:"sm",onClick:()=>E(e.key),className:"flex items-center gap-2 text-xs",children:[n.jsx(r,{className:"w-3 h-3"}),e.label]},e.key)})})})]}),(0,n.jsxs)(Object(function(){var e=Error("Cannot find module '@/components/ui/card'");throw e.code="MODULE_NOT_FOUND",e}()),{className:"bg-gray-800 border-gray-700",children:[n.jsx(Object(function(){var e=Error("Cannot find module '@/components/ui/card'");throw e.code="MODULE_NOT_FOUND",e}()),{children:n.jsx(Object(function(){var e=Error("Cannot find module '@/components/ui/card'");throw e.code="MODULE_NOT_FOUND",e}()),{className:"text-white text-sm",children:"Comparison Period"})}),n.jsx(Object(function(){var e=Error("Cannot find module '@/components/ui/card'");throw e.code="MODULE_NOT_FOUND",e}()),{children:(0,n.jsxs)("div",{className:"space-y-2",children:[N.map(e=>n.jsx(Object(function(){var e=Error("Cannot find module '@/components/ui/button'");throw e.code="MODULE_NOT_FOUND",e}()),{variant:d===e.key?"secondary":"outline",size:"sm",onClick:()=>m(e.key),className:"w-full justify-start",children:e.label},e.key)),"custom"===d&&t&&(0,n.jsxs)("div",{className:"mt-4 space-y-2",children:[(0,n.jsxs)("div",{children:[n.jsx("label",{className:"text-xs text-gray-400",children:"From Snapshot:"}),(0,n.jsxs)("select",{value:y,onChange:e=>j(e.target.value),className:"w-full px-2 py-1 bg-gray-700 border border-gray-600 rounded text-white text-xs",children:[n.jsx("option",{value:"",children:"Select snapshot..."}),t.availableSnapshots.map(e=>n.jsx("option",{value:e.id,children:L(e.timestamp)},e.id))]})]}),(0,n.jsxs)("div",{children:[n.jsx("label",{className:"text-xs text-gray-400",children:"To Snapshot:"}),(0,n.jsxs)("select",{value:v,onChange:e=>w(e.target.value),className:"w-full px-2 py-1 bg-gray-700 border border-gray-600 rounded text-white text-xs",children:[n.jsx("option",{value:"",children:"Select snapshot..."}),t.availableSnapshots.map(e=>n.jsx("option",{value:e.id,children:L(e.timestamp)},e.id))]})]})]})]})})]}),(0,n.jsxs)(Object(function(){var e=Error("Cannot find module '@/components/ui/card'");throw e.code="MODULE_NOT_FOUND",e}()),{className:"bg-gray-800 border-gray-700",children:[n.jsx(Object(function(){var e=Error("Cannot find module '@/components/ui/card'");throw e.code="MODULE_NOT_FOUND",e}()),{children:n.jsx(Object(function(){var e=Error("Cannot find module '@/components/ui/card'");throw e.code="MODULE_NOT_FOUND",e}()),{className:"text-white text-sm",children:"Alliance Filter"})}),(0,n.jsxs)(Object(function(){var e=Error("Cannot find module '@/components/ui/card'");throw e.code="MODULE_NOT_FOUND",e}()),{children:[(0,n.jsxs)("select",{value:u,onChange:e=>b(e.target.value),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded text-white text-sm",children:[n.jsx("option",{value:"all",children:"All Alliances"}),t?.alliances.map(e=>n.jsx("option",{value:e,children:e},e))]}),"all"!==u&&n.jsx("div",{className:"mt-2",children:n.jsx(Object(function(){var e=Error("Cannot find module '@/components/ui/badge'");throw e.code="MODULE_NOT_FOUND",e}()),{className:"bg-purple-500/20 text-purple-300 border-purple-500/30",children:u})})]})]}),(0,n.jsxs)(Object(function(){var e=Error("Cannot find module '@/components/ui/card'");throw e.code="MODULE_NOT_FOUND",e}()),{className:"bg-gray-800 border-gray-700",children:[n.jsx(Object(function(){var e=Error("Cannot find module '@/components/ui/card'");throw e.code="MODULE_NOT_FOUND",e}()),{children:n.jsx(Object(function(){var e=Error("Cannot find module '@/components/ui/card'");throw e.code="MODULE_NOT_FOUND",e}()),{className:"text-white text-sm",children:"Results Limit"})}),n.jsx(Object(function(){var e=Error("Cannot find module '@/components/ui/card'");throw e.code="MODULE_NOT_FOUND",e}()),{children:n.jsx("div",{className:"grid grid-cols-2 gap-2",children:["10","25","50","100"].map(e=>n.jsx(Object(function(){var e=Error("Cannot find module '@/components/ui/button'");throw e.code="MODULE_NOT_FOUND",e}()),{variant:_===e?"secondary":"outline",size:"sm",onClick:()=>U(e),className:"text-xs",children:e},e))})})]})]}),t?.summary&&n.jsx(Object(function(){var e=Error("Cannot find module '@/components/changes/ChangesSummary'");throw e.code="MODULE_NOT_FOUND",e}()),{summary:t.summary,loading:s}),"custom"===d&&(!y||!v)&&n.jsx(Object(function(){var e=Error("Cannot find module '@/components/ui/card'");throw e.code="MODULE_NOT_FOUND",e}()),{className:"bg-yellow-900/20 border-yellow-600/30",children:(0,n.jsxs)(Object(function(){var e=Error("Cannot find module '@/components/ui/card'");throw e.code="MODULE_NOT_FOUND",e}()),{className:"p-6 text-center",children:[n.jsx(p.Z,{className:"w-12 h-12 mx-auto mb-4 text-yellow-400"}),n.jsx("h3",{className:"text-lg font-semibold text-white mb-2",children:"Custom Period Selected"}),n.jsx("p",{className:"text-yellow-200 mb-4",children:'Please select both "From" and "To" snapshots above to view the changes analysis.'}),n.jsx("p",{className:"text-sm text-yellow-300",children:"Choose two different time periods to compare player progression between specific dates."})]})}),t&&(0,n.jsxs)("div",{className:"grid grid-cols-1 xl:grid-cols-3 gap-6",children:[n.jsx(Object(function(){var e=Error("Cannot find module '@/components/changes/ChangesTable'");throw e.code="MODULE_NOT_FOUND",e}()),{changes:t?.gainers||[],title:"Top Gainers",type:"gainers",metric:c,loading:s,onPlayerClick:C}),n.jsx(Object(function(){var e=Error("Cannot find module '@/components/changes/ChangesTable'");throw e.code="MODULE_NOT_FOUND",e}()),{changes:t?.smallestIncreases||[],title:"Smallest Increases",type:"smallestIncreases",metric:c,loading:s,onPlayerClick:C}),n.jsx(Object(function(){var e=Error("Cannot find module '@/components/changes/ChangesTable'");throw e.code="MODULE_NOT_FOUND",e}()),{changes:t?.losers||[],title:"Top Losers",type:"losers",metric:c,loading:s,onPlayerClick:C})]}),(0,n.jsxs)(Object(function(){var e=Error("Cannot find module '@/components/ui/card'");throw e.code="MODULE_NOT_FOUND",e}()),{className:"bg-gray-800 border-gray-700",children:[n.jsx(Object(function(){var e=Error("Cannot find module '@/components/ui/card'");throw e.code="MODULE_NOT_FOUND",e}()),{children:n.jsx(Object(function(){var e=Error("Cannot find module '@/components/ui/card'");throw e.code="MODULE_NOT_FOUND",e}()),{className:"text-white text-lg",children:"Analysis Tips"})}),n.jsx(Object(function(){var e=Error("Cannot find module '@/components/ui/card'");throw e.code="MODULE_NOT_FOUND",e}()),{children:(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[(0,n.jsxs)("div",{className:"p-4 bg-gray-700 rounded-lg",children:[(0,n.jsxs)("h4",{className:"text-white font-medium mb-2 flex items-center gap-2",children:[n.jsx(g.Z,{className:"w-4 h-4 text-green-400"}),"Top Gainers"]}),n.jsx("p",{className:"text-gray-400",children:"Players with the highest improvements. Click any player to view their detailed progress."})]}),(0,n.jsxs)("div",{className:"p-4 bg-gray-700 rounded-lg",children:[(0,n.jsxs)("h4",{className:"text-white font-medium mb-2 flex items-center gap-2",children:[n.jsx(h.Z,{className:"w-4 h-4 text-yellow-400"}),"Smallest Increases"]}),n.jsx("p",{className:"text-gray-400",children:"Players with minimal growth. Useful for identifying underperforming or inactive accounts."})]}),(0,n.jsxs)("div",{className:"p-4 bg-gray-700 rounded-lg",children:[(0,n.jsxs)("h4",{className:"text-white font-medium mb-2 flex items-center gap-2",children:[n.jsx(O.Z,{className:"w-4 h-4 text-red-400"}),"Performance Drops"]}),n.jsx("p",{className:"text-gray-400",children:"Players with significant decreases. Useful for identifying inactive or struggling players."})]})]})})]})]})}},90540:(e,t,r)=>{"use strict";r.r(t),r.d(t,{$$typeof:()=>o,__esModule:()=>a,default:()=>s});let n=(0,r(71481).createProxy)(String.raw`/Users/ciaranobrien/player-tracker/src/app/dashboard/changes/page.tsx`),{__esModule:a,$$typeof:o}=n,s=n.default}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),n=t.X(0,[3499,2463,9898,4378,2813,6672],()=>r(97232));module.exports=n})();