(()=>{var e={};e.id=8366,e.ids=[8366],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},71017:e=>{"use strict";e.exports=require("path")},57310:e=>{"use strict";e.exports=require("url")},76891:(e,r,s)=>{"use strict";s.r(r),s.d(r,{GlobalError:()=>o.a,__next_app__:()=>h,originalPathname:()=>m,pages:()=>c,routeModule:()=>u,tree:()=>l});var a=s(7),t=s(8533),n=s(29377),o=s.n(n),i=s(29799),d={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>i[e]);s.d(r,d);let l=["",{children:["dashboard",{children:["upload",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,51407)),"/Users/ciaranobrien/player-tracker/src/app/dashboard/upload/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,65697)),"/Users/ciaranobrien/player-tracker/src/app/dashboard/layout.tsx"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,97418))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(s.bind(s,59224)),"/Users/ciaranobrien/player-tracker/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,73472,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,97418))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],c=["/Users/ciaranobrien/player-tracker/src/app/dashboard/upload/page.tsx"],m="/dashboard/upload/page",h={require:s,loadChunk:()=>Promise.resolve()},u=new a.AppPageRouteModule({definition:{kind:t.x.APP_PAGE,page:"/dashboard/upload/page",pathname:"/dashboard/upload",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},95611:(e,r,s)=>{Promise.resolve().then(s.t.bind(s,45483,23)),Promise.resolve().then(s.t.bind(s,46544,23)),Promise.resolve().then(s.t.bind(s,17680,23)),Promise.resolve().then(s.t.bind(s,24138,23)),Promise.resolve().then(s.t.bind(s,38705,23)),Promise.resolve().then(s.t.bind(s,57974,23))},12168:(e,r,s)=>{Promise.resolve().then(s.bind(s,62139))},21644:(e,r,s)=>{Promise.resolve().then(s.bind(s,92319))},86170:()=>{},19950:(e,r,s)=>{"use strict";s.d(r,{Z:()=>a});let a=(0,s(36834).Z)("shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]])},62139:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>O});var a=s(54714),t=s(77580),n=s(35070),o=s.n(n),i=s(88934),d=s(65164);(function(){var e=Error("Cannot find module '@/components/search/GlobalSearch'");throw e.code="MODULE_NOT_FOUND",e})(),function(){var e=Error("Cannot find module '@/contexts/SeasonContext'");throw e.code="MODULE_NOT_FOUND",e}();var l=s(38553),c=s(96289),m=s(80620),h=s(74417),u=s(58804),x=s(22725),p=s(53157),f=s(38428),b=s(95889),g=s(16789),N=s(7268),y=s(17694),v=s(57469),j=s(35933);function O({children:e}){let r=(0,i.usePathname)(),s=(0,i.useRouter)(),{data:n,status:O}=(0,d.useSession)(),[w,U]=(0,t.useState)(!0);(0,t.useEffect)(()=>{if("loading"!==O&&!n){s.push("/auth/signin");return}},[n,O,s]);let _=[{name:"Overview",href:"/dashboard/overview",icon:l.Z},{name:"Players",href:"/dashboard/players",icon:c.Z},{name:"Progress",href:"/dashboard/progress",icon:m.Z},{name:"Leaderboard",href:"/dashboard/leaderboard",icon:h.Z},{name:"Merit Analytics",href:"/dashboard/merits",icon:u.Z},{name:"Changes",href:"/dashboard/changes",icon:x.Z},{name:"Alliance Moves",href:"/dashboard/alliance-moves",icon:p.Z},{name:"Name Changes",href:"/dashboard/name-changes",icon:f.Z},{name:"Left Realm",href:"/dashboard/left-realm",icon:b.Z}],D=[{name:"Upload Data",href:"/dashboard/upload",icon:g.Z},{name:"Manage Users",href:"/dashboard/admin/users",icon:f.Z},{name:"Manage Seasons",href:"/dashboard/admin/seasons",icon:N.Z}];return"loading"===O?a.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-900",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-500"})}):n?a.jsx(Object(function(){var e=Error("Cannot find module '@/contexts/SeasonContext'");throw e.code="MODULE_NOT_FOUND",e}()),{children:(0,a.jsxs)("div",{className:"flex h-screen bg-gray-900",children:[a.jsx("div",{className:`${w?"w-64":"w-20"} bg-gray-800 transition-all duration-300 flex-shrink-0`,children:(0,a.jsxs)("div",{className:"flex flex-col h-full",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-gray-700",children:[a.jsx("h1",{className:`text-xl font-bold text-white transition-opacity duration-300 ${!w&&"opacity-0 w-0 overflow-hidden"}`,children:"Player Tracker"}),a.jsx("button",{onClick:()=>U(!w),className:"text-gray-400 hover:text-white transition-colors",children:w?a.jsx(y.Z,{className:"w-6 h-6"}):a.jsx(v.Z,{className:"w-6 h-6"})})]}),(0,a.jsxs)("nav",{className:"flex-1 px-2 py-4 space-y-1 overflow-y-auto",children:[_.map(e=>{let s=r===e.href;return(0,a.jsxs)(o(),{href:e.href,className:`
                    flex items-center px-2 py-2 text-sm font-medium rounded-md transition-colors
                    ${s?"bg-gray-900 text-white":"text-gray-300 hover:bg-gray-700 hover:text-white"}
                  `,title:w?void 0:e.name,children:[a.jsx(e.icon,{className:"w-5 h-5 flex-shrink-0"}),a.jsx("span",{className:`ml-3 transition-opacity duration-300 ${!w&&"opacity-0 w-0 overflow-hidden"}`,children:e.name})]},e.name)}),n?.user?.role==="ADMIN"&&(0,a.jsxs)(a.Fragment,{children:[a.jsx("div",{className:"my-4 border-t border-gray-700"}),a.jsx("div",{className:`px-2 py-2 text-xs font-semibold text-gray-400 uppercase tracking-wider transition-opacity duration-300 ${!w&&"opacity-0 w-0 overflow-hidden"}`,children:"Admin"}),D.map(e=>{let s=r===e.href;return(0,a.jsxs)(o(),{href:e.href,className:`
                        flex items-center px-2 py-2 text-sm font-medium rounded-md transition-colors
                        ${s?"bg-gray-900 text-white":"text-gray-300 hover:bg-gray-700 hover:text-white"}
                      `,title:w?void 0:e.name,children:[a.jsx(e.icon,{className:"w-5 h-5 flex-shrink-0"}),a.jsx("span",{className:`ml-3 transition-opacity duration-300 ${!w&&"opacity-0 w-0 overflow-hidden"}`,children:e.name})]},e.name)})]})]}),a.jsx("div",{className:"p-4 border-t border-gray-700",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsxs)("div",{className:`flex-1 transition-opacity duration-300 ${!w&&"opacity-0 w-0 overflow-hidden"}`,children:[a.jsx("p",{className:"text-sm text-white truncate",children:n?.user?.name||"User"}),a.jsx("p",{className:"text-xs text-gray-400 capitalize",children:n?.user?.role?.toLowerCase()||"viewer"})]}),a.jsx("button",{onClick:()=>{(0,d.signOut)({callbackUrl:"/"})},className:"text-gray-400 hover:text-white transition-colors",title:"Sign Out",children:a.jsx(j.Z,{className:"w-5 h-5"})})]})})]})}),(0,a.jsxs)("div",{className:"flex-1 overflow-hidden flex flex-col",children:[a.jsx("div",{className:"bg-gray-800 border-b border-gray-700 px-6 py-4 flex-shrink-0",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[a.jsx("div",{className:"flex items-center gap-6",children:(0,a.jsxs)("h2",{className:"text-lg font-semibold text-white",children:["/dashboard/overview"===r&&"Kingdom Overview","/dashboard/players"===r&&"Player Database","/dashboard/progress"===r&&"Progress Tracking","/dashboard/leaderboard"===r&&"Leaderboards","/dashboard/merits"===r&&"Merit Analytics","/dashboard/changes"===r&&"Change Analysis","/dashboard/alliance-moves"===r&&"Alliance Moves","/dashboard/name-changes"===r&&"Name Changes","/dashboard/left-realm"===r&&"Left Realm","/dashboard/upload"===r&&"Data Upload","/dashboard/admin/users"===r&&"User Management","/dashboard/admin/seasons"===r&&"Season Management",r.startsWith("/dashboard/player/")&&"Player Profile",!r.includes("/dashboard/")&&"Dashboard"]})}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[a.jsx(Object(function(){var e=Error("Cannot find module '@/components/search/GlobalSearch'");throw e.code="MODULE_NOT_FOUND",e}()),{}),(0,a.jsxs)("div",{className:"text-sm text-gray-400",children:[n?.user?.name," â€¢ ",n?.user?.role?.toLowerCase()]})]})]})}),a.jsx("main",{className:"flex-1 overflow-auto",children:e})]})]})}):null}},92319:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>h});var a=s(54714),t=s(77580),n=s(65164),o=s(88934),i=s(36834);let d=(0,i.Z)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);var l=s(19950);let c=(0,i.Z)("info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),m=(0,i.Z)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);function h(){let{data:e}=(0,n.useSession)(),r=(0,o.useRouter)(),[s,i]=(0,t.useState)(!1),[h,u]=(0,t.useState)(0),[x,p]=(0,t.useState)(null),[f,b]=(0,t.useState)(0);if(e?.user?.role!=="ADMIN")return a.jsx("div",{className:"p-6",children:(0,a.jsxs)(Object(function(){var e=Error("Cannot find module '@/components/ui/alert'");throw e.code="MODULE_NOT_FOUND",e}()),{className:"border-red-500 bg-red-500/10",children:[a.jsx(d,{className:"h-4 w-4"}),a.jsx(Object(function(){var e=Error("Cannot find module '@/components/ui/alert'");throw e.code="MODULE_NOT_FOUND",e}()),{className:"text-red-400",children:"Access denied. This page is only available to administrators."})]})});let g=async e=>{i(!0),u(0),p(null);let s=setInterval(()=>{u(e=>e>=90?(clearInterval(s),90):e+15*Math.random())},500);try{let s=new FormData;s.append("file",e);let a=await fetch("/api/upload",{method:"POST",body:s}),t=await a.json();a.ok&&t.success?(u(100),p({success:!0,message:t.message||"Upload completed successfully",snapshotId:t.snapshotId,timestamp:t.timestamp,rowsProcessed:t.rowsProcessed}),b(e=>e+1),setTimeout(()=>{r.push("/dashboard/overview")},3e3)):p({success:!1,error:t.error||"Upload failed",details:t.details})}catch(e){p({success:!1,error:"Network error occurred",details:e instanceof Error?e.message:"Unknown error"})}finally{clearInterval(s),i(!1),u(0)}};return(0,a.jsxs)("div",{className:"p-6 space-y-6",children:[(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsxs)("h1",{className:"text-3xl font-bold text-white mb-2 flex items-center gap-3",children:[a.jsx(l.Z,{className:"w-8 h-8 text-purple-500"}),"Upload Player Data"]}),a.jsx("p",{className:"text-gray-400",children:"Upload Excel files with kingdom player data (Administrator access required)"})]}),(0,a.jsxs)(Object(function(){var e=Error("Cannot find module '@/components/ui/alert'");throw e.code="MODULE_NOT_FOUND",e}()),{className:"border-blue-500 bg-blue-500/10",children:[a.jsx(c,{className:"h-4 w-4"}),(0,a.jsxs)(Object(function(){var e=Error("Cannot find module '@/components/ui/alert'");throw e.code="MODULE_NOT_FOUND",e}()),{className:"text-blue-400",children:[a.jsx("strong",{children:"File Requirements:"})," Excel files must follow the naming convention:",a.jsx("code",{className:"mx-1 px-1 py-0.5 bg-gray-700 rounded text-xs",children:"671_YYYYMMDD_HHMMutc.xlsx"}),a.jsx("br",{}),"Example: ",a.jsx("code",{className:"mx-1 px-1 py-0.5 bg-gray-700 rounded text-xs",children:"671_20250810_2040utc.xlsx"})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)(Object(function(){var e=Error("Cannot find module '@/components/ui/card'");throw e.code="MODULE_NOT_FOUND",e}()),{className:"bg-gray-800 border-gray-700",children:[a.jsx(Object(function(){var e=Error("Cannot find module '@/components/ui/card'");throw e.code="MODULE_NOT_FOUND",e}()),{children:a.jsx(Object(function(){var e=Error("Cannot find module '@/components/ui/card'");throw e.code="MODULE_NOT_FOUND",e}()),{className:"text-white",children:"Upload New File"})}),a.jsx(Object(function(){var e=Error("Cannot find module '@/components/ui/card'");throw e.code="MODULE_NOT_FOUND",e}()),{children:a.jsx(Object(function(){var e=Error("Cannot find module '@/components/upload/FileDropzone'");throw e.code="MODULE_NOT_FOUND",e}()),{onUpload:g,uploading:s,uploadProgress:h})})]}),x&&a.jsx(Object(function(){var e=Error("Cannot find module '@/components/ui/card'");throw e.code="MODULE_NOT_FOUND",e}()),{className:`${x.success?"border-green-500 bg-green-500/10":"border-red-500 bg-red-500/10"}`,children:a.jsx(Object(function(){var e=Error("Cannot find module '@/components/ui/card'");throw e.code="MODULE_NOT_FOUND",e}()),{className:"p-4",children:(0,a.jsxs)("div",{className:"flex items-start space-x-3",children:[x.success?a.jsx(m,{className:"w-5 h-5 text-green-400 flex-shrink-0 mt-0.5"}):a.jsx(d,{className:"w-5 h-5 text-red-400 flex-shrink-0 mt-0.5"}),(0,a.jsxs)("div",{className:"flex-1",children:[a.jsx("p",{className:`font-medium ${x.success?"text-green-400":"text-red-400"}`,children:x.success?"Upload Successful!":"Upload Failed"}),a.jsx("p",{className:`text-sm mt-1 ${x.success?"text-green-300":"text-red-300"}`,children:x.message||x.error}),x.success&&x.rowsProcessed&&(0,a.jsxs)("p",{className:"text-green-200 text-sm mt-2",children:["âœ“ Processed ",x.rowsProcessed," players successfully"]}),x.success&&a.jsx("p",{className:"text-green-200 text-sm mt-2",children:"Redirecting to dashboard in 3 seconds..."}),!x.success&&x.details&&a.jsx("p",{className:"text-red-200 text-xs mt-2 font-mono bg-red-900/20 p-2 rounded",children:x.details})]})]})})})]}),a.jsx("div",{children:a.jsx(Object(function(){var e=Error("Cannot find module '@/components/upload/UploadHistory'");throw e.code="MODULE_NOT_FOUND",e}()),{refreshTrigger:f})})]}),(0,a.jsxs)(Object(function(){var e=Error("Cannot find module '@/components/ui/card'");throw e.code="MODULE_NOT_FOUND",e}()),{className:"bg-gray-800 border-gray-700",children:[a.jsx(Object(function(){var e=Error("Cannot find module '@/components/ui/card'");throw e.code="MODULE_NOT_FOUND",e}()),{children:a.jsx(Object(function(){var e=Error("Cannot find module '@/components/ui/card'");throw e.code="MODULE_NOT_FOUND",e}()),{className:"text-white text-lg",children:"Upload Tips"})}),a.jsx(Object(function(){var e=Error("Cannot find module '@/components/ui/card'");throw e.code="MODULE_NOT_FOUND",e}()),{children:(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[(0,a.jsxs)("div",{children:[a.jsx("h4",{className:"text-white font-medium mb-2",children:"File Format"}),(0,a.jsxs)("ul",{className:"text-gray-400 space-y-1",children:[a.jsx("li",{children:"â€¢ Excel files (.xlsx or .xls)"}),a.jsx("li",{children:"â€¢ Maximum size: 50MB"}),a.jsx("li",{children:'â€¢ Data should be in "671" sheet'}),a.jsx("li",{children:"â€¢ Starting from row 2 (row 1 is headers)"})]})]}),(0,a.jsxs)("div",{children:[a.jsx("h4",{className:"text-white font-medium mb-2",children:"Processing"}),(0,a.jsxs)("ul",{className:"text-gray-400 space-y-1",children:[a.jsx("li",{children:"â€¢ ~600 players per file expected"}),a.jsx("li",{children:"â€¢ Processing takes 30-60 seconds"}),a.jsx("li",{children:"â€¢ Automatic change detection"}),a.jsx("li",{children:"â€¢ Upload every 4-7 days for best tracking"})]})]})]})})]})]})}(function(){var e=Error("Cannot find module '@/components/ui/card'");throw e.code="MODULE_NOT_FOUND",e})(),function(){var e=Error("Cannot find module '@/components/ui/alert'");throw e.code="MODULE_NOT_FOUND",e}(),function(){var e=Error("Cannot find module '@/components/upload/FileDropzone'");throw e.code="MODULE_NOT_FOUND",e}(),function(){var e=Error("Cannot find module '@/components/upload/UploadHistory'");throw e.code="MODULE_NOT_FOUND",e}()},65697:(e,r,s)=>{"use strict";s.r(r),s.d(r,{$$typeof:()=>n,__esModule:()=>t,default:()=>o});let a=(0,s(71481).createProxy)(String.raw`/Users/ciaranobrien/player-tracker/src/app/dashboard/layout.tsx`),{__esModule:t,$$typeof:n}=a,o=a.default},51407:(e,r,s)=>{"use strict";s.r(r),s.d(r,{$$typeof:()=>n,__esModule:()=>t,default:()=>o});let a=(0,s(71481).createProxy)(String.raw`/Users/ciaranobrien/player-tracker/src/app/dashboard/upload/page.tsx`),{__esModule:t,$$typeof:n}=a,o=a.default},59224:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>i,metadata:()=>o});var a=s(40657),t=s(47285),n=s.n(t);s(40642),function(){var e=Error("Cannot find module '@/components/providers'");throw e.code="MODULE_NOT_FOUND",e}();let o={title:"Player Tracker",description:"Game player data tracking and analytics system"};function i({children:e}){return a.jsx("html",{lang:"en",children:a.jsx("body",{className:`${n().variable} font-sans antialiased`,children:a.jsx(Object(function(){var e=Error("Cannot find module '@/components/providers'");throw e.code="MODULE_NOT_FOUND",e}()),{children:e})})})}},97418:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>t});var a=s(78701);let t=e=>[{type:"image/x-icon",sizes:"16x16",url:(0,a.fillMetadataSegment)(".",e.params,"favicon.ico")+""}]},40642:()=>{}};var r=require("../../../webpack-runtime.js");r.C(e);var s=e=>r(r.s=e),a=r.X(0,[3499,2463,9898,4378,2813],()=>s(76891));module.exports=a})();