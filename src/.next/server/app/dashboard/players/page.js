(()=>{var e={};e.id=5857,e.ids=[5857],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},71017:e=>{"use strict";e.exports=require("path")},57310:e=>{"use strict";e.exports=require("url")},29040:(e,r,a)=>{"use strict";a.r(r),a.d(r,{GlobalError:()=>l.a,__next_app__:()=>m,originalPathname:()=>p,pages:()=>c,routeModule:()=>u,tree:()=>d});var t=a(7),s=a(8533),n=a(29377),l=a.n(n),i=a(29799),o={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>i[e]);a.d(r,o);let d=["",{children:["dashboard",{children:["players",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,72324)),"/Users/ciaranobrien/player-tracker/src/app/dashboard/players/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,65697)),"/Users/ciaranobrien/player-tracker/src/app/dashboard/layout.tsx"],metadata:{icon:[async e=>(await Promise.resolve().then(a.bind(a,97418))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(a.bind(a,59224)),"/Users/ciaranobrien/player-tracker/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,73472,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(a.bind(a,97418))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],c=["/Users/ciaranobrien/player-tracker/src/app/dashboard/players/page.tsx"],p="/dashboard/players/page",m={require:a,loadChunk:()=>Promise.resolve()},u=new t.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/dashboard/players/page",pathname:"/dashboard/players",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},95611:(e,r,a)=>{Promise.resolve().then(a.t.bind(a,45483,23)),Promise.resolve().then(a.t.bind(a,46544,23)),Promise.resolve().then(a.t.bind(a,17680,23)),Promise.resolve().then(a.t.bind(a,24138,23)),Promise.resolve().then(a.t.bind(a,38705,23)),Promise.resolve().then(a.t.bind(a,57974,23))},12168:(e,r,a)=>{Promise.resolve().then(a.bind(a,62139))},90158:(e,r,a)=>{Promise.resolve().then(a.bind(a,69885))},86170:()=>{},62139:(e,r,a)=>{"use strict";a.r(r),a.d(r,{default:()=>j});var t=a(54714),s=a(77580),n=a(35070),l=a.n(n),i=a(88934),o=a(65164);(function(){var e=Error("Cannot find module '@/components/search/GlobalSearch'");throw e.code="MODULE_NOT_FOUND",e})(),function(){var e=Error("Cannot find module '@/contexts/SeasonContext'");throw e.code="MODULE_NOT_FOUND",e}();var d=a(38553),c=a(96289),p=a(80620),m=a(74417),u=a(58804),b=a(22725),h=a(53157),y=a(38428),x=a(95889),g=a(16789),f=a(7268),v=a(17694),N=a(57469),w=a(35933);function j({children:e}){let r=(0,i.usePathname)(),a=(0,i.useRouter)(),{data:n,status:j}=(0,o.useSession)(),[k,P]=(0,s.useState)(!0);(0,s.useEffect)(()=>{if("loading"!==j&&!n){a.push("/auth/signin");return}},[n,j,a]);let _=[{name:"Overview",href:"/dashboard/overview",icon:d.Z},{name:"Players",href:"/dashboard/players",icon:c.Z},{name:"Progress",href:"/dashboard/progress",icon:p.Z},{name:"Leaderboard",href:"/dashboard/leaderboard",icon:m.Z},{name:"Merit Analytics",href:"/dashboard/merits",icon:u.Z},{name:"Changes",href:"/dashboard/changes",icon:b.Z},{name:"Alliance Moves",href:"/dashboard/alliance-moves",icon:h.Z},{name:"Name Changes",href:"/dashboard/name-changes",icon:y.Z},{name:"Left Realm",href:"/dashboard/left-realm",icon:x.Z}],C=[{name:"Upload Data",href:"/dashboard/upload",icon:g.Z},{name:"Manage Users",href:"/dashboard/admin/users",icon:y.Z},{name:"Manage Seasons",href:"/dashboard/admin/seasons",icon:f.Z}];return"loading"===j?t.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-900",children:t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-500"})}):n?t.jsx(Object(function(){var e=Error("Cannot find module '@/contexts/SeasonContext'");throw e.code="MODULE_NOT_FOUND",e}()),{children:(0,t.jsxs)("div",{className:"flex h-screen bg-gray-900",children:[t.jsx("div",{className:`${k?"w-64":"w-20"} bg-gray-800 transition-all duration-300 flex-shrink-0`,children:(0,t.jsxs)("div",{className:"flex flex-col h-full",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-gray-700",children:[t.jsx("h1",{className:`text-xl font-bold text-white transition-opacity duration-300 ${!k&&"opacity-0 w-0 overflow-hidden"}`,children:"Player Tracker"}),t.jsx("button",{onClick:()=>P(!k),className:"text-gray-400 hover:text-white transition-colors",children:k?t.jsx(v.Z,{className:"w-6 h-6"}):t.jsx(N.Z,{className:"w-6 h-6"})})]}),(0,t.jsxs)("nav",{className:"flex-1 px-2 py-4 space-y-1 overflow-y-auto",children:[_.map(e=>{let a=r===e.href;return(0,t.jsxs)(l(),{href:e.href,className:`
                    flex items-center px-2 py-2 text-sm font-medium rounded-md transition-colors
                    ${a?"bg-gray-900 text-white":"text-gray-300 hover:bg-gray-700 hover:text-white"}
                  `,title:k?void 0:e.name,children:[t.jsx(e.icon,{className:"w-5 h-5 flex-shrink-0"}),t.jsx("span",{className:`ml-3 transition-opacity duration-300 ${!k&&"opacity-0 w-0 overflow-hidden"}`,children:e.name})]},e.name)}),n?.user?.role==="ADMIN"&&(0,t.jsxs)(t.Fragment,{children:[t.jsx("div",{className:"my-4 border-t border-gray-700"}),t.jsx("div",{className:`px-2 py-2 text-xs font-semibold text-gray-400 uppercase tracking-wider transition-opacity duration-300 ${!k&&"opacity-0 w-0 overflow-hidden"}`,children:"Admin"}),C.map(e=>{let a=r===e.href;return(0,t.jsxs)(l(),{href:e.href,className:`
                        flex items-center px-2 py-2 text-sm font-medium rounded-md transition-colors
                        ${a?"bg-gray-900 text-white":"text-gray-300 hover:bg-gray-700 hover:text-white"}
                      `,title:k?void 0:e.name,children:[t.jsx(e.icon,{className:"w-5 h-5 flex-shrink-0"}),t.jsx("span",{className:`ml-3 transition-opacity duration-300 ${!k&&"opacity-0 w-0 overflow-hidden"}`,children:e.name})]},e.name)})]})]}),t.jsx("div",{className:"p-4 border-t border-gray-700",children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsxs)("div",{className:`flex-1 transition-opacity duration-300 ${!k&&"opacity-0 w-0 overflow-hidden"}`,children:[t.jsx("p",{className:"text-sm text-white truncate",children:n?.user?.name||"User"}),t.jsx("p",{className:"text-xs text-gray-400 capitalize",children:n?.user?.role?.toLowerCase()||"viewer"})]}),t.jsx("button",{onClick:()=>{(0,o.signOut)({callbackUrl:"/"})},className:"text-gray-400 hover:text-white transition-colors",title:"Sign Out",children:t.jsx(w.Z,{className:"w-5 h-5"})})]})})]})}),(0,t.jsxs)("div",{className:"flex-1 overflow-hidden flex flex-col",children:[t.jsx("div",{className:"bg-gray-800 border-b border-gray-700 px-6 py-4 flex-shrink-0",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[t.jsx("div",{className:"flex items-center gap-6",children:(0,t.jsxs)("h2",{className:"text-lg font-semibold text-white",children:["/dashboard/overview"===r&&"Kingdom Overview","/dashboard/players"===r&&"Player Database","/dashboard/progress"===r&&"Progress Tracking","/dashboard/leaderboard"===r&&"Leaderboards","/dashboard/merits"===r&&"Merit Analytics","/dashboard/changes"===r&&"Change Analysis","/dashboard/alliance-moves"===r&&"Alliance Moves","/dashboard/name-changes"===r&&"Name Changes","/dashboard/left-realm"===r&&"Left Realm","/dashboard/upload"===r&&"Data Upload","/dashboard/admin/users"===r&&"User Management","/dashboard/admin/seasons"===r&&"Season Management",r.startsWith("/dashboard/player/")&&"Player Profile",!r.includes("/dashboard/")&&"Dashboard"]})}),(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[t.jsx(Object(function(){var e=Error("Cannot find module '@/components/search/GlobalSearch'");throw e.code="MODULE_NOT_FOUND",e}()),{}),(0,t.jsxs)("div",{className:"text-sm text-gray-400",children:[n?.user?.name," • ",n?.user?.role?.toLowerCase()]})]})]})}),t.jsx("main",{className:"flex-1 overflow-auto",children:e})]})]})}):null}},69885:(e,r,a)=>{"use strict";a.r(r),a.d(r,{default:()=>l});var t=a(54714),s=a(77580),n=a(88934);function l(){let[e,r]=(0,s.useState)([]),[a,l]=(0,s.useState)([]),[i,o]=(0,s.useState)(!0),[d,c]=(0,s.useState)(""),[p,m]=(0,s.useState)("all"),[u,b]=(0,s.useState)("currentPower"),[h,y]=(0,s.useState)("desc"),x=(0,n.useRouter)(),g=[{key:"lordId",label:"Lord ID",type:"string"},{key:"name",label:"Name",type:"string"},{key:"division",label:"Division",type:"number"},{key:"allianceTag",label:"Alliance",type:"string"},{key:"currentPower",label:"Current Power",type:"bigNumber"},{key:"power",label:"Power",type:"bigNumber"},{key:"merits",label:"Merits",type:"bigNumber"},{key:"unitsKilled",label:"Units Killed",type:"bigNumber"},{key:"unitsDead",label:"Units Dead",type:"bigNumber"},{key:"unitsHealed",label:"Units Healed",type:"bigNumber"},{key:"t1KillCount",label:"T1 Kills",type:"bigNumber"},{key:"t2KillCount",label:"T2 Kills",type:"bigNumber"},{key:"t3KillCount",label:"T3 Kills",type:"bigNumber"},{key:"t4KillCount",label:"T4 Kills",type:"bigNumber"},{key:"t5KillCount",label:"T5 Kills",type:"bigNumber"},{key:"buildingPower",label:"Building Power",type:"bigNumber"},{key:"heroPower",label:"Hero Power",type:"bigNumber"},{key:"legionPower",label:"Legion Power",type:"bigNumber"},{key:"techPower",label:"Tech Power",type:"bigNumber"},{key:"victories",label:"Victories",type:"number"},{key:"defeats",label:"Defeats",type:"number"},{key:"citySieges",label:"City Sieges",type:"number"},{key:"scouted",label:"Scouted",type:"number"},{key:"helpsGiven",label:"Helps Given",type:"number"},{key:"gold",label:"Gold",type:"bigNumber"},{key:"goldSpent",label:"Gold Spent",type:"bigNumber"},{key:"wood",label:"Wood",type:"bigNumber"},{key:"woodSpent",label:"Wood Spent",type:"bigNumber"},{key:"ore",label:"Ore",type:"bigNumber"},{key:"oreSpent",label:"Ore Spent",type:"bigNumber"},{key:"mana",label:"Mana",type:"bigNumber"},{key:"manaSpent",label:"Mana Spent",type:"bigNumber"},{key:"gems",label:"Gems",type:"bigNumber"},{key:"gemsSpent",label:"Gems Spent",type:"bigNumber"},{key:"resourcesGiven",label:"Resources Given",type:"bigNumber"},{key:"resourcesGivenCount",label:"Donation Count",type:"number"},{key:"cityLevel",label:"City Level",type:"number"},{key:"faction",label:"Faction",type:"string"}];(0,s.useEffect)(()=>{f()},[]),(0,s.useEffect)(()=>{v()},[e,d,p,u,h]);let f=async()=>{try{let e=await fetch("/api/players"),a=await e.json();r(a)}catch(e){console.error("Error fetching players:",e)}finally{o(!1)}},v=()=>{let r=[...e];d&&(r=r.filter(e=>e.name.toLowerCase().includes(d.toLowerCase())||e.lordId.toLowerCase().includes(d.toLowerCase()))),"all"!==p&&(r=r.filter(e=>e.allianceTag===p)),r.sort((e,r)=>{let a=e[u],t=r[u];if("string"==typeof a&&"string"==typeof t&&!isNaN(Number(a))){let e=parseInt(a),r=parseInt(t);return"asc"===h?e-r:r-e}if("number"==typeof a&&"number"==typeof t)return"asc"===h?a-t:t-a;let s=String(a||""),n=String(t||"");return"asc"===h?s.localeCompare(n):n.localeCompare(s)}),l(r)},N=e=>{u===e?y("asc"===h?"desc":"asc"):(b(e),y("desc"))},w=e=>{x.push(`/dashboard/player/${e}`)},j=e=>{if("string"==typeof e){let r=parseInt(e);return isNaN(r)?e:r.toLocaleString()}return e.toLocaleString()};return i?t.jsx("div",{className:"flex items-center justify-center h-screen",children:t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-500"})}):(0,t.jsxs)("div",{className:"p-6",children:[(0,t.jsxs)("div",{className:"mb-6",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[t.jsx("h1",{className:"text-3xl font-bold text-white",children:"Players Database"}),t.jsx(Object(function(){var e=Error("Cannot find module '@/components/ui/export-button'");throw e.code="MODULE_NOT_FOUND",e}()),{data:a.map(e=>({name:e.name,alliance:e.allianceTag,power:parseInt(e.currentPower||"0"),killPoints:parseInt(e.merits||"0"),level:e.cityLevel,vipLevel:0,might:parseInt(e.power||"0"),troopKills:parseInt(e.unitsKilled||"0"),deads:parseInt(e.unitsDead||"0"),rss_assistance_given:parseInt(e.resourcesGiven||"0"),rss_assistance_received:0})),exportConfig:Object(function(){var e=Error("Cannot find module '@/lib/export'");throw e.code="MODULE_NOT_FOUND",e}()).players,filename:`players_export_${new Date().toISOString().split("T")[0]}`,title:"Kingdom 671 - Players Database",subtitle:`Export generated on ${new Date().toLocaleDateString()} | ${a.length} players`})]}),(0,t.jsxs)("div",{className:"flex gap-4 mb-4",children:[t.jsx("input",{type:"text",placeholder:"Search by name or Lord ID...",value:d,onChange:e=>c(e.target.value),className:"px-4 py-2 bg-gray-800 text-white rounded-lg flex-1 max-w-md"}),(0,t.jsxs)("select",{value:p,onChange:e=>m(e.target.value),className:"px-4 py-2 bg-gray-800 text-white rounded-lg",children:[t.jsx("option",{value:"all",children:"All Alliances"}),Array.from(new Set(e.map(e=>e.allianceTag).filter(Boolean))).map(e=>t.jsx("option",{value:e,children:e},e))]})]}),(0,t.jsxs)("p",{className:"text-gray-400",children:["Showing ",a.length," of ",e.length," players"]})]}),t.jsx("div",{className:"bg-gray-800 rounded-lg overflow-hidden",children:t.jsx("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"w-full",children:[t.jsx("thead",{className:"bg-gray-900 sticky top-0 z-10",children:t.jsx("tr",{children:g.map(e=>t.jsx("th",{onClick:()=>N(e.key),className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider cursor-pointer hover:bg-gray-800 whitespace-nowrap",children:(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[e.label,u===e.key&&t.jsx("span",{className:"text-purple-500",children:"asc"===h?"↑":"↓"})]})},e.key))})}),t.jsx("tbody",{className:"divide-y divide-gray-700",children:a.map(e=>t.jsx("tr",{onClick:()=>w(e.lordId),className:"hover:bg-gray-700 cursor-pointer transition-colors",children:g.map(r=>t.jsx("td",{className:"px-4 py-3 text-sm text-gray-300 whitespace-nowrap",children:"bigNumber"===r.type?j(e[r.key]):e[r.key]||"-"},r.key))},e.lordId))})]})})})]})}(function(){var e=Error("Cannot find module '@/components/ui/export-button'");throw e.code="MODULE_NOT_FOUND",e})(),function(){var e=Error("Cannot find module '@/lib/export'");throw e.code="MODULE_NOT_FOUND",e}()},65697:(e,r,a)=>{"use strict";a.r(r),a.d(r,{$$typeof:()=>n,__esModule:()=>s,default:()=>l});let t=(0,a(71481).createProxy)(String.raw`/Users/ciaranobrien/player-tracker/src/app/dashboard/layout.tsx`),{__esModule:s,$$typeof:n}=t,l=t.default},72324:(e,r,a)=>{"use strict";a.r(r),a.d(r,{$$typeof:()=>n,__esModule:()=>s,default:()=>l});let t=(0,a(71481).createProxy)(String.raw`/Users/ciaranobrien/player-tracker/src/app/dashboard/players/page.tsx`),{__esModule:s,$$typeof:n}=t,l=t.default},59224:(e,r,a)=>{"use strict";a.r(r),a.d(r,{default:()=>i,metadata:()=>l});var t=a(40657),s=a(47285),n=a.n(s);a(40642),function(){var e=Error("Cannot find module '@/components/providers'");throw e.code="MODULE_NOT_FOUND",e}();let l={title:"Player Tracker",description:"Game player data tracking and analytics system"};function i({children:e}){return t.jsx("html",{lang:"en",children:t.jsx("body",{className:`${n().variable} font-sans antialiased`,children:t.jsx(Object(function(){var e=Error("Cannot find module '@/components/providers'");throw e.code="MODULE_NOT_FOUND",e}()),{children:e})})})}},97418:(e,r,a)=>{"use strict";a.r(r),a.d(r,{default:()=>s});var t=a(78701);let s=e=>[{type:"image/x-icon",sizes:"16x16",url:(0,t.fillMetadataSegment)(".",e.params,"favicon.ico")+""}]},40642:()=>{}};var r=require("../../../webpack-runtime.js");r.C(e);var a=e=>r(r.s=e),t=r.X(0,[3499,2463,9898,4378,2813],()=>a(29040));module.exports=t})();